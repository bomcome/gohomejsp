<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dc.board">
	<resultMap type="com.dc.board.vo.BoardVo"
		id="boardResultMap">
		<id column="BOARD_NO" property="boardNo" />
		<result column="MEMBER_NO" property="memberNo" />
<!-- 		<result column="NICKNAME" property="nickname" /> -->
		<result column="TITLE" property="title" />
		<result column="CONTENTS" property="contents" />
		<result column="CRE_DATE" property="createDate"
			javaType="java.util.Date" />
		<result column="MOD_DATE" property="modifiedDate"
			javaType="java.util.Date" /> 
	</resultMap>

	<select id="boardSelectList" parameterType="map"
		resultMap="boardResultMap">
		SELECT B.BOARD_NO, B.TITLE, M.NICKNAME, B.CRE_DATE
		FROM BOARD B, MEMBERS M
		WHERE B.MEMBER_NO = M.MEMBER_NO
		ORDER BY B.BOARD_NO
	</select>
	
	<select id="boardSelectOne" parameterType="int"
		resultMap="boardResultMap">
		SELECT B.BOARD_NO, B.TITLE, B.CONTENTS, M.NICKNAME, B.CRE_DATE, B.MOD_DATE
		FROM BOARD B, MEMBERS M
		WHERE B.MEMBER_NO = M.MEMBER_NO
		AND B.BOARD_NO = #{boardNo}
	</select>
	
	<insert id="boardInsertOne" 
		parameterType= "boardVo"
		useGeneratedKeys="true" keyProperty="no">
		<selectKey keyProperty="boardNo" resultType="int" order="BEFORE">
			SELECT BOARD_NO_SEQ.NEXTVAL FROM DUAL
		</selectKey>
		
		INSERT INTO BOARD
		(BOARD_NO, MEMBER_NO, TITLE, CONTENTS, CRE_DATE, MOD_DATE)
		VALUES(#{boardNo}, #{memberNo}, #{title}, #{contents}, SYSDATE, SYSDATE)
	</insert>
	
</mapper>